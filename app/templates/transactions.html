{% extends "header.html" %}
{% block content %}
  {% if user.is_authenticated %}
    <div class="d-flex flex-column w-100 h-100 align-items-center g-10 pt-2">
        <h3>Transactions</h3>
        {% if transactions %}
            {% for transaction in transactions %}
                <div class="card d-flex flex-column align-items-center">
                    <div class="card-header w-100 p-3">
                        <h6>{{ transaction.created_at.date }}</h6>
                    </div>
                    <div class="card-body d-flex flex-column align-items-center">
                        <form action="{% url 'lotto:transactions' transaction.id %}" method="POST" class="d-flex flex-column align-items-start g-10 p-3">
                            {% csrf_token %}
                            <p>transaction_id: {{ transaction.id }}</p>
                            <p>ผู้ซื้อ: {{ transaction.user.username }}</p>
                            <p>lotto: {{ transaction.lotto }}</p>
                            <p>จำนวนหุ้น: {{ transaction.share }}</p>
                            <p>สถานะการสั่งซื้อ: {{ transaction.status }}</p>
                            {% if user.is_superuser and transaction.status != "คำสั่งซื้อสำเร็จ" %}
                                <button title="submit_form" type="submit" class="btn btn-primary px-3 py-2">ยืนยันการชำระเงิน</button>
                            {% endif %}
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <h5>No transactions created yet</h5>
        {% endif %}
    </div>
  {% endif %}
{% endblock %}